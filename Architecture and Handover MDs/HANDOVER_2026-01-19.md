# Handover - 2026-01-19

## Summary
- Wired AI GEO cron jobs with admin-gated run, schedule, and log endpoints.
- Added cron run logging into `debug_logs` for AI GEO history and sparklines.
- Updated Chat AI Bot cron dashboard to make AI GEO tiles live (run, schedule, pause, logs).

## Repos and Commits
- `AI GEO Audit`: `b029f4e` (cron controls, job history, logging)
- `Chat AI Bot`: `9aee5f3` (AI GEO dashboard actions + default admin key)

## Key Files
- `AI GEO Audit/api/cron/job-history.js`
- `AI GEO Audit/api/cron/run-job.js`
- `AI GEO Audit/api/cron/update-schedule.js`
- `AI GEO Audit/lib/cron/logCron.js`
- `AI GEO Audit/lib/api/requireAdminKeyOnly.js`
- `Chat AI Bot/public/cron-dashboard.html`

## Environment Variables
- `ARP_ADMIN_KEY` (required for AI GEO cron controls)
- `SUPABASE_DB_PASSWORD` (required for `/api/cron/gsc-data-cleanup` VACUUM)
- `CRON_SECRET` (optional; cron endpoint auth)
- `SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY`

## Sanity Checks
- `GET /api/cron/job-history?jobKey=global_run` with `x-arp-admin-key`
- `POST /api/cron/update-schedule` (frequency + timeOfDay)
- `GET /api/supabase/query-debug-logs?limit=1`

## Notes
- `debug_logs` table must exist in Supabase. Migration: `AI GEO Audit/migrations/20250117_create_debug_logs_table.sql`.
- Local DB access may fail if the Supabase DB resolves to IPv6 only. Use Supabase SQL editor if needed.
