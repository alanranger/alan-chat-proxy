<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Bench Test – Events • Products • Articles</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b1220; --panel:#0f172a; --line:#1b2540; --text:#dbe4ff; --muted:#9fb3ff;
      --orange:#E57200; --green:#00B67A; --bad:#f87171; --good:#34d399;
      --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }
    *{box-sizing:border-box}
    body{background:var(--bg);color:var(--text);font:14px/1.5 var(--sans);margin:0;padding:24px}
    h1{margin:0 0 8px 0}
    .muted{color:var(--muted)}
    .row{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}
    .col{flex:1;min-width:280px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:10px;padding:16px}
    input,button,select,textarea{background:#0b1220;color:var(--text);border:1px solid var(--line);border-radius:8px;padding:8px}
    button{cursor:pointer}
    table{width:100%;border-collapse:collapse;font-size:13px}
    th,td{border-top:1px solid var(--line);padding:6px 8px;vertical-align:top}
    th{color:var(--muted);text-align:left}
    code, .mono{font-family:var(--mono)}
    .pill{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:6px 10px;margin:4px 6px 0 0;text-decoration:none;color:var(--text);font-weight:600}
    .pill.brand{background:transparent;border-color:var(--orange);color:var(--orange)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .span-12{grid-column:span 12}
    .span-4{grid-column:span 4}
    .kpi{display:flex;gap:10px;align-items:center}
    .badge{display:inline-block;padding:2px 6px;border-radius:6px;background:#0b1220;border:1px solid var(--line);font-size:12px}
    .badge.good{border-color:#1e3a2a;color:#86efac}
    .badge.bad{border-color:#3a1e1e;color:#fecaca}
    details.debug{border:1px dashed var(--line);border-radius:8px;padding:10px;margin-top:12px}
    .small{font-size:12px}
    .mb8{margin-bottom:8px}
    .mb16{margin-bottom:16px}
    .orange{color:var(--orange)}
    .flex{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .w100{width:100%}
    .nowrap{white-space:nowrap}
    .table-wrap{max-height:360px;overflow:auto;border:1px solid var(--line);border-radius:8px}
    .hint{color:#94a3b8}
  </style>
  <script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.5/dist/umd/supabase.js"></script>
</head>
<body>
  <header class="mb16">
    <h1>Bench Test – <span class="orange">Events • Products • Articles</span></h1>
    <div class="muted">Natural-language query → 3 blocks + brand pills. <b>No Squarespace site search pill</b>. Prices via products ↔ URL.</div>
  </header>

  <section class="row mb16">
    <div class="col card">
      <h3 class="mb8">Supabase</h3>
      <label class="small">URL</label>
      <input id="sb_url" class="w100 mb8" value="https://igzvwbvgvmzvvzoclufx.supabase.co">
      <label class="small">ANON</label>
      <textarea id="sb_key" class="w100 mb8" rows="3">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlnenZ3YnZndm16dnZ6b2NsdWZ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2Nzc5MjgsImV4cCI6MjA3MzI1MzkyOH0.A9TCmnXKJhDRYBkrO0mAMPiUQeV9enweeyRWKWQ1SZY</textarea>
      <div class="flex">
        <button id="btnConnect">Connect</button>
        <span id="connStatus" class="badge">Not connected</span>
      </div>
      <details class="debug">
        <summary>Debug: View names</summary>
        <div class="small">Views: <code>ai_events</code>, <code>ai_products</code>, <code>ai_articles</code>, <code>page_chunks</code></div>
      </details>
    </div>

    <div class="col card">
      <h3 class="mb8">Single Query</h3>
      <input id="q" class="w100 mb8" placeholder="e.g. when is the next bluebell workshop near coventry?">
      <div class="flex mb8">
        <button id="btnRun">Run</button>
        <span class="small">Intent: <span id="intent" class="badge">—</span></span>
        <span class="small">Tokens: <span id="tok" class="badge mono">[]</span></span>
      </div>
      <div class="flex small mb8">
        <span>Brand pills:</span>
        <div id="pills"></div>
      </div>
      <div class="flex small">
        <button id="btnCopySummary">Copy last run</button>
        <button id="btnCopyJSON">Copy JSON</button>
        <button id="btnDownloadJSON">Download JSON</button>
        <button id="btnCopyLogs">Copy logs</button>
        <button id="btnCopySuiteJSON">Copy suite (JSON)</button>
        <button id="btnDownloadSuiteCSV">Download suite (CSV)</button>
        <span id="copyStatus" class="badge">Ready</span>
      </div>
    </div>

    <div class="col card">
      <h3 class="mb8">CSV Loaders</h3>
      <div class="mb8">
        <label class="small">Landing pages CSV (url, title/meta_title)</label>
        <input type="file" id="csvLanding" accept=".csv">
        <div class="hint small">Only used for brand pills (Blog, Newsletter, Gift Vouchers, Payment Plan). No search pill is ever created.</div>
      </div>
      <div class="mb8">
        <label class="small">Questions suite CSV (idx, query, expected)</label>
        <input type="file" id="csvQuestions" accept=".csv">
      </div>
      <div class="flex small mb8">
        <label><input type="checkbox" id="suiteFetch" checked> Fetch data for suite</label>
        <span class="hint">Runs RPCs for each row (first 10 items kept).</span>
      </div>
      <div class="flex">
        <button id="btnRunSuite">Run whole suite</button>
        <span id="suiteStats" class="badge">—</span>
      </div>
      <div class="flex small mb8" style="margin-top:8px">
        <select id="suitePreview" class="w100"></select>
        <button id="btnPreview">Preview selection</button>
      </div>
    </div>
  </section>

  <section class="grid">
    <div class="span-4 card">
      <div class="kpi mb8">
        <h3 class="mb8">Events</h3>
        <span id="countEvents" class="badge">0</span>
      </div>
      <div class="table-wrap"><table id="tblEvents">
        <thead><tr><th>Title</th><th class="nowrap">When</th><th>Location</th><th>£</th></tr></thead>
        <tbody></tbody>
      </table></div>
      <div class="small hint">Event prices shown are looked up from <code>ai_products</code> by matching <code>url</code>.</div>
    </div>

    <div class="span-4 card">
      <div class="kpi mb8">
        <h3 class="mb8">Products</h3>
        <span id="countProducts" class="badge">0</span>
      </div>
      <div class="table-wrap"><table id="tblProducts">
        <thead><tr><th>Title</th><th>£</th><th>Tags</th></tr></thead>
        <tbody></tbody>
      </table></div>
    </div>

    <div class="span-4 card">
      <div class="kpi mb8">
        <h3 class="mb8">Articles</h3>
        <span id="countArticles" class="badge">0</span>
      </div>
      <div class="table-wrap"><table id="tblArticles">
        <thead><tr><th>Title</th><th>Snippet</th><th>Kind</th></tr></thead>
        <tbody></tbody>
      </table></div>
    </div>

    <div class="span-12">
      <details class="debug" open>
        <summary>Debug & Logs</summary>
        <div id="log" class="mono small"></div>
      </details>
    </div>
  </section>

  <script>
    // ------- Utilities -------
    const logEl = document.getElementById('log');
    const log = (...args) => {
      const line = args.map(x => typeof x === 'string' ? x : JSON.stringify(x)).join(' ');
      logEl.textContent += line + "\n";
      logEl.scrollTop = logEl.scrollHeight;
    };

    const $ = sel => document.querySelector(sel);
    const $byId = id => document.getElementById(id);

    function tokens(q){
      return (q||"").toLowerCase().replace(/[^a-z0-9\s-]/g," ").split(/\s+/).filter(Boolean);
    }

    // -------- Intent heuristic (refined) --------
    function detectIntent(q) {
      const s = (q || "").toLowerCase().replace(/\s+/g, ' ').trim();

      const hasEvent   = /\b(workshop|workshops|course|courses|class|classes|event|events|session|tuition)\b/.test(s);
      const hasSched   = /\b(when|where|date|time|next|upcoming|start|ends?)\b/.test(s);
      const hasPrice   = /\b(how much|price|cost|£|gbp|fee|fees?)\b/.test(s);
      const buyIntent  = /\b(book|buy|purchase|checkout|voucher|vouchers|gift|payment ?plan|subscribe|subscription|pay)\b/.test(s);
      const policyYou  = /\bdo you\b|\bcan you\b|\bwill you\b/.test(s);
      const policyMe   = /\bdo i\b|\bcan i\b|\bwill i\b|\bam i\b|\bshould i\b/.test(s);
      const adviceLead = /\b(what|how|why|need|require|should|which|help)\b/.test(s);
      const mentionsFree = /\bfree\b/.test(s);

      if (hasEvent && hasSched) return "events";
      if (hasEvent && hasPrice && !buyIntent) return "events";
      if (policyYou && hasEvent && /\b(run|offer|host|provide|do)\b.*\b(workshop|workshops|course|courses|class|classes)\b/.test(s)) return "events";
      if (mentionsFree && /course|workshop|class|subscription|online/.test(s)) return "advice";
      if (buyIntent || (hasPrice && !hasEvent)) return "products";
      if (policyMe) return "advice";
      if (adviceLead) return "advice";
      if (hasEvent) return "events";
      return "advice";
    }

    // ------- Brand pills -------
    let landing = [];
    let lastRun = { query:"", tokens:[], intent:null, pills:[], events:[], products:[], articles:[] };
    function generatePills() {
      const wrap = document.getElementById('pills');
      wrap.innerHTML = '';
      const out = [];
      const add = (label,url) => out.push({label,url,brand:true});

      const find = (kw,label) => {
        const hit = landing.find(x => ((x.title||x.meta_title||"") + " " + (x.url||"")).toLowerCase().includes(kw));
        if (hit) add(label, hit.url);
      };
      find("blog", "Blog / Articles");
      find("newsletter", "Newsletter");
      find("gift", "Gift Vouchers");
      find("payment", "Payment Plan");

      out.push({label:"Event Listing", url:"https://www.alanranger.com/search?query=workshops", brand:true});
      out.push({label:"Course Finder", url:"https://www.alanranger.com/course-finder-photography-classes-near-me", brand:true});
      out.push({label:"Home", url:"https://www.alanranger.com", brand:true});

      out.forEach(p => {
        const a = document.createElement('a');
        a.className = 'pill brand';
        a.textContent = p.label;
        a.href = p.url;
        a.target = '_blank';
        wrap.appendChild(a);
      });

      lastRun.pills = out;
    }

    // ------- CSV parsing -------
    async function parseCSVFile(file){
      const text = await file.text();
      return parseCSV(text);
    }
    function parseCSV(text){
      const rows = [];
      const lines = text.replace(/\r/g,'').split('\n').filter(Boolean);
      const header = lines.shift().split(',').map(h => h.trim());
      for (const line of lines){
        const cols = splitCSVLine(line);
        const obj = {};
        header.forEach((h,i)=> obj[h] = (cols[i]||'').trim());
        rows.push(obj);
      }
      return rows;
    }
    function splitCSVLine(line){
      const out = []; let cur = ''; let inQ = false;
      for (let i=0;i<line.length;i++){
        const ch = line[i];
        if (ch === '"'){
          if (inQ && line[i+1] === '"'){ cur+='"'; i++; }
          else inQ = !inQ;
        } else if (ch === ',' && !inQ){
          out.push(cur); cur='';
        } else cur += ch;
      }
      out.push(cur);
      return out;
    }

    // ------- Supabase (RPCs only) -------
    let supa = null;

    async function connect(){
      const url = $('#sb_url').value.trim();
      const key = $('#sb_key').value.trim();
      supa = window.supabase.createClient(url, key, {
        global: { headers: { 'x-client-info':'benchtest' } }
      });
      $('#connStatus').textContent = 'Connected';
      $('#connStatus').classList.add('good');
      log('Connected to Supabase:', url);
      try {
        const [e,p,a] = await Promise.all([
          supa.from('ai_events').select('url', {count:'exact', head:true}),
          supa.from('ai_products').select('url', {count:'exact', head:true}),
          supa.from('ai_articles').select('url', {count:'exact', head:true}),
        ]);
        log(`Counts — events:${e.count} products:${p.count} articles:${a.count}`);
      } catch(err){ log('Count check failed', err.message||err); }
    }

    async function fetchViaRPC(fn, arr){
      const { data, error } = await supa.rpc(fn, { keys: arr });
      if (error) { log('RPC error', fn, error.message||error); throw error; }
      return data || [];
    }

    function decorateEventPrices(events, products) {
      const priceByUrl = new Map(products.map(p => [p.url, p.price]));
      return events.map(e => ({ ...e, price: priceByUrl.get(e.url) ?? null }));
    }

    // ------- Rendering -------
    const moneyGB = new Intl.NumberFormat('en-GB', { style:'currency', currency:'GBP', maximumFractionDigits:0 });

    function renderEvents(rows){
      const tb = $('#tblEvents tbody'); tb.innerHTML='';
      rows.forEach(r=>{
        const tr = document.createElement('tr');
        const tTitle = `<a href="${r.url}" target="_blank">${escapeHTML(r.title||'')}</a>`;
        const when = r.when || r.start_date || r.date_start || '';
        const loc = r.location || '';
        const price = (r.price!=null) ? moneyGB.format(r.price) : '';
        tr.innerHTML = `<td>${tTitle}</td><td class="nowrap">${escapeHTML(when||'')}</td><td>${escapeHTML(loc)}</td><td>${price}</td>`;
        tb.appendChild(tr);
      });
      $('#countEvents').textContent = rows.length;
    }

    function renderProducts(rows){
      const tb = $('#tblProducts tbody'); tb.innerHTML='';
      rows.forEach(r=>{
        const tr = document.createElement('tr');
        const tTitle = `<a href="${r.url}" target="_blank">${escapeHTML(r.title||'')}</a>`;
        const price = (r.price!=null) ? moneyGB.format(r.price) : '';
        tr.innerHTML = `<td>${tTitle}</td><td>${price}</td><td>${escapeHTML(r.tags||'')}</td>`;
        tb.appendChild(tr);
      });
      $('#countProducts').textContent = rows.length;
    }

    function renderArticles(rows){
      const tb = $('#tblArticles tbody'); tb.innerHTML='';
      rows.forEach(r=>{
        const tr = document.createElement('tr');
        const tTitle = `<a href="${r.url}" target="_blank">${escapeHTML(r.title||'')}</a>`;
        tr.innerHTML = `<td>${tTitle}</td><td>${escapeHTML(r.snippet||'')}</td><td>${escapeHTML(r.kind||'')}</td>`;
        tb.appendChild(tr);
      });
      $('#countArticles').textContent = rows.length;
    }

    function escapeHTML(s){ return (s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])) }

    // ------- Export helpers -------
    let suiteResults = []; // [{idx,query,expected,got,pass, data:{events,products,articles}, tokens, intent}]
    function buildReadableSummary(){
      const maxList = 20;
      const lines = [];
      lines.push(`Query: ${lastRun.query}`);
      lines.push(`Intent: ${lastRun.intent}`);
      lines.push(`Tokens: ${JSON.stringify(lastRun.tokens)}`);
      lines.push(`Brand pills: ${lastRun.pills.map(p=>`${p.label} → ${p.url}`).join(' | ') || '—'}`);
      lines.push('');
      lines.push(`Events (${lastRun.events.length}):`);
      lastRun.events.slice(0,maxList).forEach((e,i)=>{
        const when = e.when || e.start_date || e.date_start || '';
        const price = (e.price!=null) ? ` | ${moneyGB.format(e.price)}` : '';
        lines.push(`${i+1}. ${e.title} — ${when}${price} — ${e.url}`);
      });
      if (lastRun.events.length > maxList) lines.push(`… +${lastRun.events.length - maxList} more`);
      lines.push('');
      lines.push(`Products (${lastRun.products.length}):`);
      lastRun.products.slice(0,maxList).forEach((p,i)=>{
        const price = (p.price!=null) ? ` | ${moneyGB.format(p.price)}` : '';
        lines.push(`${i+1}. ${p.title}${price} — ${p.url}`);
      });
      if (lastRun.products.length > maxList) lines.push(`… +${lastRun.products.length - maxList} more`);
      lines.push('');
      lines.push(`Articles (${lastRun.articles.length}):`);
      lastRun.articles.slice(0,maxList).forEach((a,i)=>{
        lines.push(`${i+1}. ${a.title} — ${a.url}`);
      });
      if (lastRun.articles.length > maxList) lines.push(`… +${lastRun.articles.length - maxList} more`);
      return lines.join('\n');
    }

    async function copyText(text){
      await navigator.clipboard.writeText(text);
      flashCopyStatus('Copied');
    }
    function flashCopyStatus(msg){
      const el = document.getElementById('copyStatus');
      el.textContent = msg;
      setTimeout(()=>{ el.textContent = 'Ready'; }, 1200);
    }
    function downloadJSON(filename, obj){
      const blob = new Blob([JSON.stringify(obj, null, 2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
    function downloadCSV(filename, rows){
      const header = 'idx,query,expected,got,pass';
      const lines = rows.map(r => [
        csvCell(r.idx), csvCell(r.query), csvCell(r.expected), csvCell(r.got), csvCell(r.pass ? '1' : '0')
      ].join(','));
      const csv = [header, ...lines].join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
    function csvCell(v){
      const s = (v ?? '').toString().replace(/"/g,'""');
      return /[",\n]/.test(s) ? `"${s}"` : s;
    }

    // ------- Single run -------
    async function runSingle(){
      const q = $('#q').value || '';
      const toks = tokens(q).filter(t => t.length >= 3);
      $('#tok').textContent = JSON.stringify(toks);
      const intent = detectIntent(q);
      $('#intent').textContent = intent;
      log('Query:', q, '→ intent:', intent, 'tokens:', JSON.stringify(toks));

      lastRun = { query:q, tokens:toks, intent, pills:lastRun.pills || [], events:[], products:[], articles:[] };

      if (toks.length === 0){
        renderEvents([]); renderProducts([]); renderArticles([]);
        return;
      }

      const [events, products, articles] = await Promise.all([
        fetchViaRPC('search_events', toks),
        fetchViaRPC('search_products', toks),
        fetchViaRPC('search_articles', toks)
      ]);

      const evWithPrice = decorateEventPrices(events, products);

      lastRun.events   = evWithPrice;
      lastRun.products = products;
      lastRun.articles = articles;

      renderEvents(evWithPrice);
      renderProducts(products);
      renderArticles(articles);
    }

    // ------- Suite runner with auto-preview -------
    let questions = []; // [{idx, query, expected}]
    function normalizeExpected(v){
      const s = (v||'').toLowerCase().trim();
      if (s === 'articles') return 'advice';
      return s;
    }

    async function runSuite(){
      if (!questions.length){ log('No questions loaded.'); return; }
      let pass=0, fail=0;
      suiteResults = [];
      const doFetch = $byId('suiteFetch').checked;
      const select = $byId('suitePreview');
      select.innerHTML = '';
      for (const [i,row] of questions.entries()){
        const q = row.query || '';
        const expected = normalizeExpected(row.expected);
        const got = detectIntent(q);
        const ok = (got === expected);

        let data = { events:[], products:[], articles:[] };
        let toks = [];
        if (doFetch){
          toks = tokens(q).filter(t => t.length >= 3);
          if (toks.length){
            const [ev, pr, ar] = await Promise.all([
              fetchViaRPC('search_events', toks),
              fetchViaRPC('search_products', toks),
              fetchViaRPC('search_articles', toks)
            ]);
            const evp = decorateEventPrices(ev, pr);
            data.events = evp.slice(0,10);
            data.products = pr.slice(0,10);
            data.articles = ar.slice(0,10);
            log(`[${row.idx || (i+1)}] "${q}" → got:${got} expected:${expected} ${ok?'✓':'✗'} | rows: e:${ev.length} p:${pr.length} a:${ar.length}`);
          } else {
            log(`[${row.idx || (i+1)}] "${q}" → got:${got} expected:${expected} ${ok?'✓':'✗'} | no tokens`);
          }
        } else {
          log(`[${row.idx || (i+1)}] "${q}" → got:${got} expected:${expected} ${ok?'✓':'✗'}`);
        }

        suiteResults.push({ idx: row.idx || (i+1), query:q, expected, got, pass:ok, tokens:toks, intent:got, data });

        const opt = document.createElement('option');
        opt.value = String(i);
        opt.textContent = `[${row.idx || (i+1)}] ${q}`;
        select.appendChild(opt);

        ok ? pass++ : fail++;
      }
      $('#suiteStats').textContent = `Pass ${pass} / ${pass+fail}`;
      $('#suiteStats').classList.toggle('good', true);
      $('#suiteStats').classList.toggle('bad', false);

      // NEW: auto-preview first row so blocks populate immediately
      if (suiteResults.length) {
        $byId('suitePreview').value = "0";
        previewSuiteSelection();
      }
    }

    // Preview any suite row into the 3 blocks
    function previewSuiteSelection(){
      const idx = parseInt($byId('suitePreview').value, 10);
      if (isNaN(idx)) return;
      const row = suiteResults[idx];
      if (!row) return;
      lastRun = {
        query: row.query,
        tokens: row.tokens || [],
        intent: row.intent,
        pills: lastRun.pills || [],
        events: row.data?.events || [],
        products: row.data?.products || [],
        articles: row.data?.articles || []
      };
      $('#intent').textContent = row.intent || '—';
      $('#tok').textContent = JSON.stringify(row.tokens || []);
      renderEvents(lastRun.events);
      renderProducts(lastRun.products);
      renderArticles(lastRun.articles);
    }

    // ------- Event wiring -------
    $byId('btnConnect').addEventListener('click', connect);
    $byId('btnRun').addEventListener('click', runSingle);
    $byId('btnRunSuite').addEventListener('click', runSuite);
    $byId('btnPreview').addEventListener('click', previewSuiteSelection);

    $byId('csvLanding').addEventListener('change', async (e)=>{
      const f = e.target.files?.[0]; if (!f) return;
      landing = await parseCSVFile(f);
      log(`Loaded landing pages: ${landing.length}`);
      generatePills();
    });

    $byId('csvQuestions').addEventListener('change', async (e)=>{
      const f = e.target.files?.[0]; if (!f) return;
      const rows = await parseCSVFile(f);
      questions = rows.map(r=>({ idx:r.idx, query:r.query, expected:r.expected }));
      log(`Loaded questions: ${questions.length}`);
    });

    // Export buttons
    $byId('btnCopySummary').addEventListener('click', async ()=>{ await copyText(buildReadableSummary()); });
    $byId('btnCopyJSON').addEventListener('click', async ()=>{ await copyText(JSON.stringify(lastRun, null, 2)); });
    $byId('btnDownloadJSON').addEventListener('click', ()=>{ downloadJSON('bench-last-run.json', lastRun); });
    $byId('btnCopyLogs').addEventListener('click', async ()=>{ await copyText(logEl.textContent || ''); });
    $byId('btnCopySuiteJSON').addEventListener('click', async ()=>{
      await copyText(JSON.stringify({ results:suiteResults }, null, 2));
      flashCopyStatus('Suite JSON copied');
    });
    $byId('btnDownloadSuiteCSV').addEventListener('click', ()=>{ downloadCSV('bench-suite-results.csv', suiteResults); });

    // Initial pills (even without landing CSV)
    generatePills();
  </script>
</body>
</html>
