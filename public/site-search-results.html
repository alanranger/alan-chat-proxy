<!-- AR | Site Search Results | v1.2 | Uses /api/search/query (chat ranking/confidence) -->
<div id="ar-site-search"></div>
<link rel="stylesheet" href="/ar-site-search.css">
<script src="/ar-site-search.js"></script>
<script>
  (function(){
    function getParam(key){
      return new URLSearchParams(window.location.search).get(key) || "";
    }
    function mountWithRetry(attempt){
      var root = document.getElementById("ar-site-search");
      if (!root) return;
      if (window.ARSiteSearch) {
        var q = getParam("q");
        window.ARSiteSearch.mount(root, {
          initialQuery: q,
          autoSearch: true,
          autoFocus: !q
        });
        return;
      }
      if (attempt >= 10) return;
      setTimeout(function(){ mountWithRetry(attempt + 1); }, 100);
    }
    mountWithRetry(0);
  })();
</script>
